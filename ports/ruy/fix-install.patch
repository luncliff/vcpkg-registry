diff --git a/CMakeLists.txt b/CMakeLists.txt
index 98d480d..2b31f49 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -14,11 +14,12 @@
 
 cmake_policy(SET CMP0012 NEW)
 cmake_policy(SET CMP0048 NEW)
+cmake_policy(SET CMP0007 NEW)
 project(ruy CXX)
 cmake_minimum_required(VERSION 3.13)  # Copied from IREE
 set(CMAKE_CXX_STANDARD 14)
 
-
+include(GNUInstallDirs)
 
 if (PROJECT_NAME STREQUAL CMAKE_PROJECT_NAME)
   set(RUY_IS_TOPLEVEL TRUE)
@@ -40,9 +41,11 @@ include(cmake/ruy_cc_library.cmake)
 include(cmake/ruy_cc_binary.cmake)
 include(cmake/ruy_cc_test.cmake)
 
+find_package(unofficial-cpuinfo CONFIG REQUIRED)
+
 # Skip cpuinfo if it was already generated, which can happen when ruy is
 # a subdirectory in a wider project that already uses cpuinfo.
-if (NOT TARGET cpuinfo)
+if (FALSE)
   # Test if the third_party/cpuinfo submodule was checked out before
   # adding that subdirectory, so we can do more helpful things below in the
   # else() block when it's not.
@@ -88,3 +91,7 @@ add_subdirectory("ruy")
 if (NOT RUY_MINIMAL_BUILD)
   add_subdirectory("example")
 endif()
+install(DIRECTORY ruy/profiler 
+        DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/ruy FILES_MATCHING PATTERN "*.h")
+install(EXPORT ${PROJECT_NAME}-config NAMESPACE unofficial::
+        DESTINATION ${CMAKE_INSTALL_LIBDIR}/cmake/${PROJECT_NAME})
\ No newline at end of file
diff --git a/cmake/ruy_cc_library.cmake b/cmake/ruy_cc_library.cmake
index 38accc5..2625b0f 100644
--- a/cmake/ruy_cc_library.cmake
+++ b/cmake/ruy_cc_library.cmake
@@ -47,7 +47,8 @@ function(ruy_cc_library)
     add_library(${_NAME} INTERFACE)
     target_include_directories(${_NAME}
       INTERFACE
-        "${PROJECT_SOURCE_DIR}"
+        $<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}>
+        $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>
     )
     target_link_libraries(${_NAME}
       INTERFACE
@@ -82,4 +83,6 @@ function(ruy_cc_library)
         ${_RULE_DEFINES}
     )
   endif()
+  install(FILES ${_RULE_HDRS} DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/ruy)
+  install(TARGETS ${_RULE_NAME} EXPORT ${PROJECT_NAME}-config DESTINATION ${CMAKE_INSTALL_LIBDIR})
 endfunction()
diff --git a/cmake/ruy_include_directories.cmake b/cmake/ruy_include_directories.cmake
index e9b50a9..8b35320 100644
--- a/cmake/ruy_include_directories.cmake
+++ b/cmake/ruy_include_directories.cmake
@@ -15,7 +15,8 @@
 function(ruy_include_directories NAME DEPS)
   target_include_directories(${NAME}
       PUBLIC
-      "${PROJECT_SOURCE_DIR}"
+        $<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}>
+        $<INSTALL_INTERFACE:${CMAKE_INSTALL_INCLUDEDIR}>
   )
   if (cpuinfo IN_LIST DEPS)
     target_include_directories(${NAME}
diff --git a/ruy/CMakeLists.txt b/ruy/CMakeLists.txt
index 502ad8a..3d3d0f5 100644
--- a/ruy/CMakeLists.txt
+++ b/ruy/CMakeLists.txt
@@ -409,15 +409,7 @@ else()
   set(ruy_5_DRUY_HAVE_CPUINFO "-DRUY_HAVE_CPUINFO")
 endif()
 
-if(CMAKE_SYSTEM_PROCESSOR STREQUAL ppc64 OR CMAKE_SYSTEM_PROCESSOR STREQUAL ppc64le)
-  set(ruy_6_cpuinfo "")
-elseif(CMAKE_SYSTEM_PROCESSOR STREQUAL s390 OR CMAKE_SYSTEM_PROCESSOR STREQUAL s390x)
-  set(ruy_6_cpuinfo "")
-elseif(CMAKE_SYSTEM_NAME STREQUAL Fuchsia)
-  set(ruy_6_cpuinfo "")
-else()
-  set(ruy_6_cpuinfo "cpuinfo")
-endif()
+list(APPEND ruy_6_cpuinfo unofficial::cpuinfo::clog unofficial::cpuinfo::cpuinfo)
 
 ruy_cc_library(
   NAME
