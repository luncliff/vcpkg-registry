diff --git a/CMakeLists.txt b/CMakeLists.txt
index dd4f4fe..9526aa4 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -182,7 +182,7 @@ ENDIF()
 # ---[ Build flags
 IF(NOT CMAKE_SYSTEM_NAME)
   MESSAGE(FATAL_ERROR "CMAKE_SYSTEM_NAME not defined")
-ELSEIF(NOT CMAKE_SYSTEM_NAME MATCHES "^(Android|Darwin|iOS|Linux|Windows|CYGWIN|MSYS|QURT)$")
+ELSEIF(NOT CMAKE_SYSTEM_NAME MATCHES "^(Android|Darwin|iOS|Linux|Windows|WindowsStore|CYGWIN|MSYS|QURT)$")
   MESSAGE(FATAL_ERROR "Unrecognized CMAKE_SYSTEM_NAME value \"${CMAKE_SYSTEM_NAME}\"")
 ENDIF()
 IF(CMAKE_SYSTEM_NAME MATCHES "Windows")
@@ -952,7 +952,7 @@ TARGET_INCLUDE_DIRECTORIES(normalization PRIVATE include src)
 TARGET_INCLUDE_DIRECTORIES(packing PRIVATE include src)
 TARGET_INCLUDE_DIRECTORIES(logging PRIVATE include src)
 IF(XNNPACK_BUILD_LIBRARY)
-  TARGET_INCLUDE_DIRECTORIES(XNNPACK PUBLIC include)
+  TARGET_INCLUDE_DIRECTORIES(XNNPACK PUBLIC $<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}/include>)
   TARGET_INCLUDE_DIRECTORIES(XNNPACK PRIVATE src)
   TARGET_INCLUDE_DIRECTORIES(allocator PRIVATE include src)
   TARGET_INCLUDE_DIRECTORIES(cache PRIVATE include src)
@@ -964,6 +964,10 @@ IF(XNNPACK_BUILD_LIBRARY)
   TARGET_INCLUDE_DIRECTORIES(memory PRIVATE include src)
   TARGET_INCLUDE_DIRECTORIES(mutex PRIVATE include src)
   TARGET_INCLUDE_DIRECTORIES(post-operation PUBLIC include src)
+  if(ANDROID)
+    find_library(LOG_LIB NAMES log REQUIRED)
+    target_link_libraries(XNNPACK PRIVATE log)
+  endif()
   IF(WIN32)
     # Target Windows 7+ API
     TARGET_COMPILE_DEFINITIONS(XNNPACK PRIVATE _WIN32_WINNT=0x0601)
@@ -987,7 +991,9 @@ IF(LIBM)
 ENDIF()
 
 # ---[ Configure cpuinfo
-IF(NOT TARGET cpuinfo)
+find_package(cpuinfo CONFIG REQUIRED)
+add_library(cpuinfo ALIAS cpuinfo::cpuinfo)
+IF(FALSE)
   IF(NOT XNNPACK_USE_SYSTEM_LIBS)
     SET(CPUINFO_BUILD_TOOLS OFF CACHE BOOL "")
     SET(CPUINFO_BUILD_UNIT_TESTS OFF CACHE BOOL "")
@@ -1009,12 +1015,12 @@ IF(NOT TARGET cpuinfo)
 ENDIF()
 IF(XNNPACK_BUILD_LIBRARY)
   TARGET_LINK_LIBRARIES(hardware-config PRIVATE cpuinfo)
-  TARGET_LINK_LIBRARIES(XNNPACK PRIVATE cpuinfo)
+  TARGET_LINK_LIBRARIES(XNNPACK PUBLIC cpuinfo::cpuinfo)
 ENDIF()
 
 # ---[ Configure pthreadpool
 IF(NOT TARGET pthreadpool)
-  IF(NOT XNNPACK_USE_SYSTEM_LIBS)
+  IF(FALSE)
     SET(PTHREADPOOL_BUILD_TESTS OFF CACHE BOOL "")
     SET(PTHREADPOOL_BUILD_BENCHMARKS OFF CACHE BOOL "")
     SET(PTHREADPOOL_ALLOW_DEPRECATED_API OFF CACHE BOOL "")
@@ -1022,13 +1028,14 @@ IF(NOT TARGET pthreadpool)
       "${PTHREADPOOL_SOURCE_DIR}"
       "${CMAKE_BINARY_DIR}/pthreadpool")
   ELSE()
-    ADD_LIBRARY(pthreadpool SHARED IMPORTED)
-    FIND_LIBRARY(PTHREADPOOL_LIBRARY pthreadpool PATHS "${PTHREADPOOL_SOURCE_DIR}/lib")
+    ADD_LIBRARY(pthreadpool STATIC IMPORTED)
+    find_library(PTHREADPOOL_LIBRARY NAMES pthreadpool REQUIRED)
     IF(NOT PTHREADPOOL_LIBRARY)
       MESSAGE(FATAL_ERROR "Cannot find pthreadpool")
     ENDIF()
     FIND_PACKAGE(Threads REQUIRED)
-    TARGET_INCLUDE_DIRECTORIES(pthreadpool INTERFACE "${PTHREADPOOL_SOURCE_DIR}/include")
+    find_path(PTHREADPOOL_INCLUDE_DIRS "pthreadpool.h" REQUIRED)
+    TARGET_INCLUDE_DIRECTORIES(pthreadpool INTERFACE "${PTHREADPOOL_INCLUDE_DIRS}")
     TARGET_LINK_LIBRARIES(pthreadpool INTERFACE Threads::Threads)
     SET_PROPERTY(TARGET pthreadpool PROPERTY IMPORTED_LOCATION "${PTHREADPOOL_LIBRARY}")
     SET_PROPERTY(TARGET pthreadpool PROPERTY IMPORTED_IMPLIB "${PTHREADPOOL_LIBRARY}")
@@ -1046,7 +1053,9 @@ TARGET_LINK_LIBRARIES(microparams-init PRIVATE pthreadpool)
 TARGET_LINK_LIBRARIES(normalization PRIVATE pthreadpool)
 TARGET_LINK_LIBRARIES(packing PRIVATE pthreadpool)
 IF(XNNPACK_BUILD_LIBRARY)
-  TARGET_LINK_LIBRARIES(XNNPACK PUBLIC pthreadpool)
+  get_filename_component(PTHREADPOOL_LIBDIR "${PTHREADPOOL_LIBRARY}" PATH)
+  target_link_directories(XNNPACK PUBLIC ${PTHREADPOOL_LIBDIR})
+  TARGET_LINK_LIBRARIES(XNNPACK PUBLIC ${PTHREADPOOL_LIBRARY})
   TARGET_LINK_LIBRARIES(allocator PRIVATE pthreadpool)
   TARGET_LINK_LIBRARIES(cache PRIVATE memory pthreadpool)
   TARGET_LINK_LIBRARIES(subgraph PRIVATE pthreadpool)
@@ -1059,7 +1068,10 @@ IF(XNNPACK_BUILD_LIBRARY)
 ENDIF()
 
 # ---[ Configure FXdiv
-IF(NOT TARGET fxdiv)
+find_path(FXDIV_INCLUDE_DIRS "fxdiv.h" REQUIRED)
+add_library(fxdiv INTERFACE)
+target_include_directories(fxdiv INTERFACE ${FXDIV_INCLUDE_DIRS})
+IF(FALSE)
   IF(NOT XNNPACK_USE_SYSTEM_LIBS)
     SET(FXDIV_BUILD_TESTS OFF CACHE BOOL "")
     SET(FXDIV_BUILD_BENCHMARKS OFF CACHE BOOL "")
@@ -1067,7 +1079,7 @@ IF(NOT TARGET fxdiv)
       "${FXDIV_SOURCE_DIR}"
       "${CMAKE_BINARY_DIR}/FXdiv")
   ELSE()
-    FIND_FILE(FXDIV_HDR fxdiv.h PATH_SUFFIXES include PATHS "${FXDIV_SOURCE_DIR}")
+    find_path(FXDIV_HDR NAMES "fxdiv.h" REQUIRED)
     IF(NOT FXDIV_HDR)
       MESSAGE(FATAL_ERROR "Cannot find fxdiv")
     ENDIF()
@@ -1086,7 +1098,10 @@ IF(XNNPACK_BUILD_LIBRARY)
 ENDIF()
 
 # ---[ Configure FP16
-IF(NOT TARGET fp16)
+find_path(FP16_INCLUDE_DIRS "fp16.h" REQUIRED)
+add_library(fp16 INTERFACE)
+target_include_directories(fp16 INTERFACE ${FP16_INCLUDE_DIRS})
+IF(FALSE)
   IF(NOT XNNPACK_USE_SYSTEM_LIBS)
     SET(FP16_BUILD_TESTS OFF CACHE BOOL "")
     SET(FP16_BUILD_BENCHMARKS OFF CACHE BOOL "")
@@ -1117,9 +1132,18 @@ IF(XNNPACK_BUILD_LIBRARY)
 
   TARGET_LINK_LIBRARIES(XNNPACK PRIVATE fp16)
   INSTALL(TARGETS XNNPACK
+      # EXPORT xnnpack-targets # requires object targets to be in export set
       LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
       ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
       PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
+  # install(EXPORT xnnpack-targets DESTINATION ${CMAKE_INSTALL_DATAROOTDIR})
+
+  include(CMakePackageConfigHelpers)
+  get_filename_component(CONFIG_FILE_PATH ${CMAKE_CURRENT_BINARY_DIR}/xnnpack-config.cmake ABSOLUTE)
+  configure_package_config_file(
+    cmake/xnnpack-config.template.cmake ${CONFIG_FILE_PATH}
+    INSTALL_DESTINATION ${CMAKE_INSTALL_DATAROOTDIR})
+  install(FILES ${CONFIG_FILE_PATH} DESTINATION ${CMAKE_INSTALL_DATAROOTDIR})
 ENDIF()
 
 # ---[ XNNPACK unit tests
