diff --git a/CMakeLists.txt b/CMakeLists.txt
index f95efcd..3ee56f2 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -64,7 +64,10 @@ IF(XNNPACK_BUILD_BENCHMARKS OR XNNPACK_BUILD_TESTS)
 ENDIF()
 
 # --- [ Determine target processor
-IF(CMAKE_OSX_ARCHITECTURES)
+IF(EMSCRIPTEN)
+  MESSAGE(STATUS "Building XNNPACK for WebAssembly with Emscripten")
+  SET(XNNPACK_TARGET_PROCESSOR "wasm")
+ELSEIF(CMAKE_OSX_ARCHITECTURES)
   LIST(LENGTH CMAKE_OSX_ARCHITECTURES CMAKE_OSX_ARCHITECTURES_COUNT)
   IF(CMAKE_OSX_ARCHITECTURES_COUNT GREATER 1)
     MESSAGE(FATAL_ERROR "Unsupported XNNPACK build with multiple OSX architectures (${CMAKE_OSX_ARCHITECTURES}). "
@@ -355,7 +358,7 @@ ENDIF()
 # ---[ Build flags
 IF(NOT CMAKE_SYSTEM_NAME)
   MESSAGE(FATAL_ERROR "CMAKE_SYSTEM_NAME not defined")
-ELSEIF(NOT CMAKE_SYSTEM_NAME MATCHES "^(Android|Darwin|iOS|Linux|Windows|CYGWIN|MSYS|QURT)$")
+ELSEIF(NOT CMAKE_SYSTEM_NAME MATCHES "^(Android|Darwin|iOS|Linux|Windows|WindowsStore|Emscripten|CYGWIN|MSYS|QURT)$")
   MESSAGE(FATAL_ERROR "Unrecognized CMAKE_SYSTEM_NAME value \"${CMAKE_SYSTEM_NAME}\"")
 ENDIF()
 IF(CMAKE_SYSTEM_NAME MATCHES "Windows")
@@ -363,6 +366,12 @@ IF(CMAKE_SYSTEM_NAME MATCHES "Windows")
   ADD_COMPILE_DEFINITIONS("NOMINMAX")
 ENDIF()
 
+IF(EMSCRIPTEN)
+  ADD_COMPILE_OPTIONS("-msimd128")
+  ADD_COMPILE_OPTIONS("-mfp16")
+  ADD_COMPILE_OPTIONS("-mrelaxed-simd")
+ENDIF()
+
 IF(CMAKE_SYSTEM_NAME MATCHES "^(Android)$")
   IF(XNNPACK_TARGET_PROCESSOR MATCHES "^arm64")
     set(CMAKE_EXE_LINKER_FLAGS "${CMAKE_EXE_LINKER_FLAGS} -Wl,-z,force-bti")
@@ -816,6 +825,12 @@ IF(XNNPACK_TARGET_PROCESSOR MATCHES "^riscv")
     LIST(APPEND PROD_MICROKERNEL_SRCS ${PROD_RVVFP16ARITH_MICROKERNEL_SRCS})
   ENDIF()
 ENDIF()
+IF(XNNPACK_TARGET_PROCESSOR MATCHES "^wasm")
+  LIST(APPEND NON_PROD_MICROKERNEL_SRCS ${NON_PROD_WASMRELAXEDSIMD_MICROKERNEL_SRCS})
+  LIST(APPEND PROD_MICROKERNEL_SRCS ${PROD_WASMRELAXEDSIMD_MICROKERNEL_SRCS})
+  LIST(APPEND NON_PROD_MICROKERNEL_SRCS ${NON_PROD_WASMSIMD_MICROKERNEL_SRCS})
+  LIST(APPEND PROD_MICROKERNEL_SRCS ${PROD_WASMSIMD_MICROKERNEL_SRCS})
+ENDIF()
 
 SET(ALL_MICROKERNEL_SRCS ${PROD_MICROKERNEL_SRCS} ${NON_PROD_MICROKERNEL_SRCS})
 
@@ -833,7 +848,7 @@ ADD_CUSTOM_COMMAND(
 # all other XNNPACK targets.
 ADD_LIBRARY(xnnpack-base INTERFACE)
 
-ADD_LIBRARY(microkernels-prod STATIC ${PROD_MICROKERNEL_SRCS} ${TABLE_SRCS})
+ADD_LIBRARY(microkernels-prod OBJECT ${PROD_MICROKERNEL_SRCS} ${TABLE_SRCS})
 TARGET_LINK_LIBRARIES(microkernels-prod PUBLIC sanitizers)
 IF(XNNPACK_BUILD_ALL_MICROKERNELS)
   ADD_LIBRARY(microkernels-all STATIC ${NON_PROD_MICROKERNEL_SRCS})
@@ -1113,7 +1128,7 @@ ENDIF()
 INCLUDE_DIRECTORIES(.)
 TARGET_INCLUDE_DIRECTORIES(hardware-config PRIVATE include src ${CPUINFO_SOURCE_DIR}/include)
 IF(XNNPACK_BUILD_LIBRARY)
-  TARGET_INCLUDE_DIRECTORIES(XNNPACK PUBLIC include)
+  TARGET_INCLUDE_DIRECTORIES(XNNPACK PUBLIC $<BUILD_INTERFACE:${PROJECT_SOURCE_DIR}/include>)
   IF(WIN32)
     # Target Windows 7+ API
     TARGET_COMPILE_DEFINITIONS(XNNPACK PRIVATE _WIN32_WINNT=0x0601)
@@ -1202,7 +1217,7 @@ IF(NOT TARGET fxdiv)
     IF(NOT FXDIV_HDR)
       MESSAGE(FATAL_ERROR "Cannot find fxdiv")
     ENDIF()
-    ADD_LIBRARY(fxdiv STATIC "${FXDIV_HDR}")
+    ADD_LIBRARY(fxdiv INTERFACE "${FXDIV_HDR}")
     TARGET_INCLUDE_DIRECTORIES(fxdiv INTERFACE "${FXDIV_SOURCE_DIR}/include")
     SET_PROPERTY(TARGET fxdiv PROPERTY LINKER_LANGUAGE C)
   ENDIF()
@@ -1217,7 +1232,7 @@ IF(XNNPACK_BUILD_LIBRARY)
 ENDIF()
 
 IF(XNNPACK_BUILD_LIBRARY)
-  INSTALL(TARGETS XNNPACK microkernels-prod
+  INSTALL(TARGETS XNNPACK # microkernels-prod
       LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
       ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR}
       PUBLIC_HEADER DESTINATION ${CMAKE_INSTALL_INCLUDEDIR})
