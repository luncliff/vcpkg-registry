diff --git a/common/chat.cpp b/common/chat.cpp
index 1..2 100644
--- a/common/chat.cpp
+++ b/common/chat.cpp
@@ -1437,7 +1437,7 @@ common_chat_params common_chat_params_init_deepseek_v3_1(const common_chat_temp
     };
 
     auto prompt = apply(tmpl, inputs,
-                       /* messages_override= */ inputs.messages,
+                       /* messages_override= */ std::make_optional(inputs.messages),
                        /* tools_override= */ std::nullopt,
                        additional_context);
     data.prompt = prompt;
