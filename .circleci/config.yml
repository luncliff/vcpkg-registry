# https://circleci.com/docs/2.0/configuration-reference
version: 2.1

orbs:
  win: circleci/windows@4.1.1
  jq: circleci/jq@2.2.0

workflows:
  windows_workflow:
    jobs:
      - windows_ports

jobs:
  windows_ports:
    executor:
      name: win/default
    steps:
      - checkout
      - run:
          name: "Show baseline.json"
          command: cat versions/baseline.json | jq
      - run:
          name: "Show environments"
          command: |
            Write-Output $env:VCPKG_DEFAULT_TRIPLET
            Write-Output $env:CIRCLE_WORKING_DIRECTORY
            $env:VCPKG_OVERLAY_PORTS="${env:CIRCLE_WORKING_DIRECTORY}/ports"
            Write-Output $env:VCPKG_OVERLAY_PORTS
          environment:
            VCPKG_DEFAULT_TRIPLET: x64-uwp
      - run:
          name: "Clone microsoft/vcpkg"
          command: git clone --branch=2022.04.12 --depth=1 https://github.com/microsoft/vcpkg
